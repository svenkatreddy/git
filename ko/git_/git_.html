<!DOCTYPE HTML>
<html lang="en-US">
    <head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#">
        
        <meta charset="UTF-8">
        <title>Git 레퍼런스 | Learn Git</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="robots" content="index, follow">
        <meta name="author" content="GitbookIO">
        <meta name="description" content="The entire Pro Git book.">
        <meta name="keywords" content="gitbook,github" >
        <meta name="generator" content="www.gitbook.io">

        
        <link rel="next" href="../git_/packfile.html" />
        
        
        <link rel="prev" href="../git_/git_.html" />
        

        <meta property="og:title" content="Git 레퍼런스 | Learn Git">
        <meta property="og:site_name" content="Learn Git">
        <meta property="og:type" content="book">
        <meta property="og:locale" content="en_US">

        <meta property="book:author" content="https://github.com/GitbookIO">
        <meta property="book:tag" content="GitBook">

        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    </head>
    <body>
        
    <div class="book" data-github="GitbookIO/git" data-level="9.3" data-basepath=".." data-revision="1397503683046">
    <div class="book-header">
    <!-- Actions Left -->
    
    <a href="https://github.com/GitbookIO/git" target="_blank" class="btn pull-left"><i class="fa fa-github-alt"></i></a>
    
    <a href="#" class="btn pull-left toggle-summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search"><i class="fa fa-search"></i></a>

    <!-- Actions Right -->
    <a href="#" target="_blank" class="btn pull-right" data-sharing="google-plus"><i class="fa fa-google-plus"></i></a>
    <a href="#" target="_blank" class="btn pull-right" data-sharing="facebook"><i class="fa fa-facebook"></i></a>
    <a href="#" target="_blank" class="btn pull-right" data-sharing="twitter"><i class="fa fa-twitter"></i></a>

    
    <a href="https://github.com/GitbookIO/git/stargazers" target="_blank" class="btn pull-right count-star"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/GitbookIO/git/watchers" target="_blank" class="btn pull-right count-watch"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>
    

    <!-- Title -->
    <h1><a href="../" >Learn Git</a></h1>
</div>

    <div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        
        <li>
            <a href="https://github.com/GitbookIO" target="blank">About the author</a>
        </li>
        <li>
            <a href="https://github.com/GitbookIO/git/issues" target="blank">Questions and Issues</a>
        </li>
        <li>
            <a href="https://github.com/GitbookIO/git/edit/master/git_/git_.md" target="blank">Edit and Contribute</a>
        </li>
        <li class="divider"></li>
        
        <li data-level="0" data-path="index.html">
            <a href="../"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
            <li  data-level="1" data-path="index.html">
                
                <a href="../index.html">
                    <i class="fa fa-check"></i> <b>1.</b> 시작하기
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="1.1" data-path="_.html">
                            
                            <a href="../_.html">
                                <i class="fa fa-check"></i> <b>1.1.</b> 버전 관리란?
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.2" data-path="__git_.html">
                            
                            <a href="../__git_.html">
                                <i class="fa fa-check"></i> <b>1.2.</b> 짧게 보는 Git의 역사
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.3" data-path="git_.html">
                            
                            <a href="../git_.html">
                                <i class="fa fa-check"></i> <b>1.3.</b> Git 기초
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.4" data-path="git_.html">
                            
                            <a href="../git_.html">
                                <i class="fa fa-check"></i> <b>1.4.</b> Git 설치
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.5" data-path="git__.html">
                            
                            <a href="../git__.html">
                                <i class="fa fa-check"></i> <b>1.5.</b> Git 최초 설정
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.6" data-path="_.html">
                            
                            <a href="../_.html">
                                <i class="fa fa-check"></i> <b>1.6.</b> 도움말 보기
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.7" data-path=".html">
                            
                            <a href="../.html">
                                <i class="fa fa-check"></i> <b>1.7.</b> 요약
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="2" data-path="git_/README.html">
                
                <a href="../git_/README.html">
                    <i class="fa fa-check"></i> <b>2.</b> Git의 기초
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="2.1" data-path="git_/git__.html">
                            
                            <a href="../git_/git__.html">
                                <i class="fa fa-check"></i> <b>2.1.</b> Git 저장소 만들기
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.2" data-path="git_/__.html">
                            
                            <a href="../git_/__.html">
                                <i class="fa fa-check"></i> <b>2.2.</b> 수정하고 저장소에 저장하기
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.3" data-path="git_/__.html">
                            
                            <a href="../git_/__.html">
                                <i class="fa fa-check"></i> <b>2.3.</b> 커밋 히스토리 조회하기
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.4" data-path="git_/.html">
                            
                            <a href="../git_/.html">
                                <i class="fa fa-check"></i> <b>2.4.</b> 되돌리기
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.5" data-path="git_/_.html">
                            
                            <a href="../git_/_.html">
                                <i class="fa fa-check"></i> <b>2.5.</b> 리모트 저장소
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.6" data-path="git_/.html">
                            
                            <a href="../git_/.html">
                                <i class="fa fa-check"></i> <b>2.6.</b> 태그
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.7" data-path="git_/_.html">
                            
                            <a href="../git_/_.html">
                                <i class="fa fa-check"></i> <b>2.7.</b> 팁과 트릭
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.8" data-path="git_/.html">
                            
                            <a href="../git_/.html">
                                <i class="fa fa-check"></i> <b>2.8.</b> 요약
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="3" data-path="git_/README.html">
                
                <a href="../git_/README.html">
                    <i class="fa fa-check"></i> <b>3.</b> Git 브랜치
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="3.1" data-path="git_/_.html">
                            
                            <a href="../git_/_.html">
                                <i class="fa fa-check"></i> <b>3.1.</b> 브랜치란 무엇인가?
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.2" data-path="git_/_merge_.html">
                            
                            <a href="../git_/_merge_.html">
                                <i class="fa fa-check"></i> <b>3.2.</b> 브랜치와 Merge의 기초
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.3" data-path="git_/_.html">
                            
                            <a href="../git_/_.html">
                                <i class="fa fa-check"></i> <b>3.3.</b> 브랜치 관리
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.4" data-path="git_/_workflow.html">
                            
                            <a href="../git_/_workflow.html">
                                <i class="fa fa-check"></i> <b>3.4.</b> 브랜치 Workflow
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.5" data-path="git_/_.html">
                            
                            <a href="../git_/_.html">
                                <i class="fa fa-check"></i> <b>3.5.</b> 리모트 브랜치
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.6" data-path="git_/rebase.html">
                            
                            <a href="../git_/rebase.html">
                                <i class="fa fa-check"></i> <b>3.6.</b> Rebase하기
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.7" data-path="git_/.html">
                            
                            <a href="../git_/.html">
                                <i class="fa fa-check"></i> <b>3.7.</b> 요약
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="4" data-path="git_/README.html">
                
                <a href="../git_/README.html">
                    <i class="fa fa-check"></i> <b>4.</b> Git 서버
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="4.1" data-path="git_/.html">
                            
                            <a href="../git_/.html">
                                <i class="fa fa-check"></i> <b>4.1.</b> 프로토콜
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.2" data-path="git_/_git_.html">
                            
                            <a href="../git_/_git_.html">
                                <i class="fa fa-check"></i> <b>4.2.</b> 서버에 Git 설치하기
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.3" data-path="git_/ssh__.html">
                            
                            <a href="../git_/ssh__.html">
                                <i class="fa fa-check"></i> <b>4.3.</b> SSH 공개키 만들기
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.4" data-path="git_/_.html">
                            
                            <a href="../git_/_.html">
                                <i class="fa fa-check"></i> <b>4.4.</b> 서버에 설정하기
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.5" data-path="git_/.html">
                            
                            <a href="../git_/.html">
                                <i class="fa fa-check"></i> <b>4.5.</b> 공개하기
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.6" data-path="git_/gitweb.html">
                            
                            <a href="../git_/gitweb.html">
                                <i class="fa fa-check"></i> <b>4.6.</b> GitWeb
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.7" data-path="git_/gitosis.html">
                            
                            <a href="../git_/gitosis.html">
                                <i class="fa fa-check"></i> <b>4.7.</b> Gitosis
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.8" data-path="git_/gitolite.html">
                            
                            <a href="../git_/gitolite.html">
                                <i class="fa fa-check"></i> <b>4.8.</b> Gitolite
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.9" data-path="git_/git_.html">
                            
                            <a href="../git_/git_.html">
                                <i class="fa fa-check"></i> <b>4.9.</b> Git 데몬
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.10" data-path="git_/hosted_git.html">
                            
                            <a href="../git_/hosted_git.html">
                                <i class="fa fa-check"></i> <b>4.10.</b> Hosted Git
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.11" data-path="git_/.html">
                            
                            <a href="../git_/.html">
                                <i class="fa fa-check"></i> <b>4.11.</b> 요약
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="5" data-path="__git/README.html">
                
                <a href="../__git/README.html">
                    <i class="fa fa-check"></i> <b>5.</b> 분산 환경에서의 Git
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="5.1" data-path="__git/__workflow.html">
                            
                            <a href="../__git/__workflow.html">
                                <i class="fa fa-check"></i> <b>5.1.</b> 분산 환경에서의 Workflow
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.2" data-path="__git/_.html">
                            
                            <a href="../__git/_.html">
                                <i class="fa fa-check"></i> <b>5.2.</b> 프로젝트에 기여하기
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.3" data-path="__git/_.html">
                            
                            <a href="../__git/_.html">
                                <i class="fa fa-check"></i> <b>5.3.</b> 프로젝트 운영하기
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.4" data-path="__git/.html">
                            
                            <a href="../__git/.html">
                                <i class="fa fa-check"></i> <b>5.4.</b> 요약
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="6" data-path="git_/README.html">
                
                <a href="../git_/README.html">
                    <i class="fa fa-check"></i> <b>6.</b> Git 도구
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="6.1" data-path="git_/_.html">
                            
                            <a href="../git_/_.html">
                                <i class="fa fa-check"></i> <b>6.1.</b> 리비전 조회하기
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.2" data-path="git_/_.html">
                            
                            <a href="../git_/_.html">
                                <i class="fa fa-check"></i> <b>6.2.</b> 대화형 명령어
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.3" data-path="git_/stashing.html">
                            
                            <a href="../git_/stashing.html">
                                <i class="fa fa-check"></i> <b>6.3.</b> Stashing
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.4" data-path="git_/_.html">
                            
                            <a href="../git_/_.html">
                                <i class="fa fa-check"></i> <b>6.4.</b> 히스토리 단장하기
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.5" data-path="git_/git__.html">
                            
                            <a href="../git_/git__.html">
                                <i class="fa fa-check"></i> <b>6.5.</b> Git으로 버그 찾기
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.6" data-path="git_/.html">
                            
                            <a href="../git_/.html">
                                <i class="fa fa-check"></i> <b>6.6.</b> 서브모듈
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.7" data-path="git_/subtree_merge.html">
                            
                            <a href="../git_/subtree_merge.html">
                                <i class="fa fa-check"></i> <b>6.7.</b> Subtree Merge
                            </a>
                            
                        </li>
                    
                        <li  data-level="6.8" data-path="git_/.html">
                            
                            <a href="../git_/.html">
                                <i class="fa fa-check"></i> <b>6.8.</b> 요약
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="7" data-path="git/README.html">
                
                <a href="../git/README.html">
                    <i class="fa fa-check"></i> <b>7.</b> Git맞춤
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="7.1" data-path="git/git_.html">
                            
                            <a href="../git/git_.html">
                                <i class="fa fa-check"></i> <b>7.1.</b> Git 설정하기
                            </a>
                            
                        </li>
                    
                        <li  data-level="7.2" data-path="git/git_attribute.html">
                            
                            <a href="../git/git_attribute.html">
                                <i class="fa fa-check"></i> <b>7.2.</b> Git Attribute
                            </a>
                            
                        </li>
                    
                        <li  data-level="7.3" data-path="git/git_.html">
                            
                            <a href="../git/git_.html">
                                <i class="fa fa-check"></i> <b>7.3.</b> Git 훅
                            </a>
                            
                        </li>
                    
                        <li  data-level="7.4" data-path="git/_.html">
                            
                            <a href="../git/_.html">
                                <i class="fa fa-check"></i> <b>7.4.</b> 정책 구현하기
                            </a>
                            
                        </li>
                    
                        <li  data-level="7.5" data-path="git/.html">
                            
                            <a href="../git/.html">
                                <i class="fa fa-check"></i> <b>7.5.</b> 요약
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="8" data-path="git_/README.html">
                
                <a href="../git_/README.html">
                    <i class="fa fa-check"></i> <b>8.</b> Git으로 이전하기
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="8.1" data-path="git_/git_subversion.html">
                            
                            <a href="../git_/git_subversion.html">
                                <i class="fa fa-check"></i> <b>8.1.</b> Git과 Subversion
                            </a>
                            
                        </li>
                    
                        <li  data-level="8.2" data-path="git_/git_.html">
                            
                            <a href="../git_/git_.html">
                                <i class="fa fa-check"></i> <b>8.2.</b> Git으로 옮기기
                            </a>
                            
                        </li>
                    
                        <li  data-level="8.3" data-path="git_/.html">
                            
                            <a href="../git_/.html">
                                <i class="fa fa-check"></i> <b>8.3.</b> 요약
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="9" data-path="git_/README.html">
                
                <a href="../git_/README.html">
                    <i class="fa fa-check"></i> <b>9.</b> Git의 내부
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="9.1" data-path="git_/plumbing__porcelain_.html">
                            
                            <a href="../git_/plumbing__porcelain_.html">
                                <i class="fa fa-check"></i> <b>9.1.</b> Plumbing 명령과 Porcelain 명령
                            </a>
                            
                        </li>
                    
                        <li  data-level="9.2" data-path="git_/git_.html">
                            
                            <a href="../git_/git_.html">
                                <i class="fa fa-check"></i> <b>9.2.</b> Git 개체
                            </a>
                            
                        </li>
                    
                        <li  data-level="9.3" data-path="git_/git_.html">
                            
                            <a href="../git_/git_.html">
                                <i class="fa fa-check"></i> <b>9.3.</b> Git 레퍼런스
                            </a>
                            
                        </li>
                    
                        <li  data-level="9.4" data-path="git_/packfile.html">
                            
                            <a href="../git_/packfile.html">
                                <i class="fa fa-check"></i> <b>9.4.</b> Packfile
                            </a>
                            
                        </li>
                    
                        <li  data-level="9.5" data-path="git_/refspec.html">
                            
                            <a href="../git_/refspec.html">
                                <i class="fa fa-check"></i> <b>9.5.</b> Refspec
                            </a>
                            
                        </li>
                    
                        <li  data-level="9.6" data-path="git_/__.html">
                            
                            <a href="../git_/__.html">
                                <i class="fa fa-check"></i> <b>9.6.</b> 데이터 전송 프로토콜
                            </a>
                            
                        </li>
                    
                        <li  data-level="9.7" data-path="git_/___.html">
                            
                            <a href="../git_/___.html">
                                <i class="fa fa-check"></i> <b>9.7.</b> 운영 및 데이터 복구
                            </a>
                            
                        </li>
                    
                        <li  data-level="9.8" data-path="git_/.html">
                            
                            <a href="../git_/.html">
                                <i class="fa fa-check"></i> <b>9.8.</b> 요약
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 86.11111111111111%;min-width: 83.33333333333333%;"></div>
    </div>
    <div class="chapters">
    
        <a href="../index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="../__git_.html" title="짧게 보는 Git의 역사" class="chapter done " data-progress="1.2" style="left: 2.7777777777777777%;"></a>
    
        <a href="../git_.html" title="Git 설치" class="chapter done " data-progress="1.4" style="left: 5.555555555555555%;"></a>
    
        <a href="../git__.html" title="Git 최초 설정" class="chapter done " data-progress="1.5" style="left: 8.333333333333334%;"></a>
    
        <a href="../_.html" title="도움말 보기" class="chapter done " data-progress="1.6" style="left: 11.11111111111111%;"></a>
    
        <a href="../.html" title="요약" class="chapter done " data-progress="1.7" style="left: 13.88888888888889%;"></a>
    
        <a href="../git_/_merge_.html" title="브랜치와 Merge의 기초" class="chapter done " data-progress="3.2" style="left: 16.666666666666668%;"></a>
    
        <a href="../git_/_workflow.html" title="브랜치 Workflow" class="chapter done " data-progress="3.4" style="left: 19.444444444444443%;"></a>
    
        <a href="../git_/rebase.html" title="Rebase하기" class="chapter done " data-progress="3.6" style="left: 22.22222222222222%;"></a>
    
        <a href="../git_/hosted_git.html" title="Hosted Git" class="chapter done " data-progress="4.10" style="left: 25%;"></a>
    
        <a href="../git_/_git_.html" title="서버에 Git 설치하기" class="chapter done " data-progress="4.2" style="left: 27.77777777777778%;"></a>
    
        <a href="../git_/ssh__.html" title="SSH 공개키 만들기" class="chapter done " data-progress="4.3" style="left: 30.555555555555557%;"></a>
    
        <a href="../git_/gitweb.html" title="GitWeb" class="chapter done " data-progress="4.6" style="left: 33.333333333333336%;"></a>
    
        <a href="../git_/gitosis.html" title="Gitosis" class="chapter done " data-progress="4.7" style="left: 36.111111111111114%;"></a>
    
        <a href="../git_/gitolite.html" title="Gitolite" class="chapter done " data-progress="4.8" style="left: 38.888888888888886%;"></a>
    
        <a href="../__git/README.html" title="분산 환경에서의 Git" class="chapter done new-chapter" data-progress="5" style="left: 41.666666666666664%;"></a>
    
        <a href="../__git/__workflow.html" title="분산 환경에서의 Workflow" class="chapter done " data-progress="5.1" style="left: 44.44444444444444%;"></a>
    
        <a href="../__git/_.html" title="프로젝트 운영하기" class="chapter done " data-progress="5.3" style="left: 47.22222222222222%;"></a>
    
        <a href="../__git/.html" title="요약" class="chapter done " data-progress="5.4" style="left: 50%;"></a>
    
        <a href="../git_/stashing.html" title="Stashing" class="chapter done " data-progress="6.3" style="left: 52.77777777777778%;"></a>
    
        <a href="../git_/_.html" title="히스토리 단장하기" class="chapter done " data-progress="6.4" style="left: 55.55555555555556%;"></a>
    
        <a href="../git_/git__.html" title="Git으로 버그 찾기" class="chapter done " data-progress="6.5" style="left: 58.333333333333336%;"></a>
    
        <a href="../git_/subtree_merge.html" title="Subtree Merge" class="chapter done " data-progress="6.7" style="left: 61.111111111111114%;"></a>
    
        <a href="../git/README.html" title="Git맞춤" class="chapter done new-chapter" data-progress="7" style="left: 63.888888888888886%;"></a>
    
        <a href="../git/git_attribute.html" title="Git Attribute" class="chapter done " data-progress="7.2" style="left: 66.66666666666667%;"></a>
    
        <a href="../git/git_.html" title="Git 훅" class="chapter done " data-progress="7.3" style="left: 69.44444444444444%;"></a>
    
        <a href="../git/_.html" title="정책 구현하기" class="chapter done " data-progress="7.4" style="left: 72.22222222222223%;"></a>
    
        <a href="../git/.html" title="요약" class="chapter done " data-progress="7.5" style="left: 75%;"></a>
    
        <a href="../git_/git_subversion.html" title="Git과 Subversion" class="chapter done " data-progress="8.1" style="left: 77.77777777777777%;"></a>
    
        <a href="../git_/README.html" title="Git의 내부" class="chapter done new-chapter" data-progress="9" style="left: 80.55555555555556%;"></a>
    
        <a href="../git_/plumbing__porcelain_.html" title="Plumbing 명령과 Porcelain 명령" class="chapter done " data-progress="9.1" style="left: 83.33333333333333%;"></a>
    
        <a href="../git_/git_.html" title="Git 레퍼런스" class="chapter done " data-progress="9.3" style="left: 86.11111111111111%;"></a>
    
        <a href="../git_/packfile.html" title="Packfile" class="chapter  " data-progress="9.4" style="left: 88.88888888888889%;"></a>
    
        <a href="../git_/refspec.html" title="Refspec" class="chapter  " data-progress="9.5" style="left: 91.66666666666667%;"></a>
    
        <a href="../git_/__.html" title="데이터 전송 프로토콜" class="chapter  " data-progress="9.6" style="left: 94.44444444444444%;"></a>
    
        <a href="../git_/___.html" title="운영 및 데이터 복구" class="chapter  " data-progress="9.7" style="left: 97.22222222222223%;"></a>
    
        <a href="../git_/.html" title="요약" class="chapter  " data-progress="9.8" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_310">
                    
                        <h1 id="git-">Git 레퍼런스</h1>
<p><code>git log 1a410e</code> 라고 실행하면 전체 히스토리를 볼 수 있지만, 여전히 <code>1a410e</code>를 기억해야 한다. 이 커밋은 마지막 커밋이기 때문에 히스토리를 따라 모든 개체를 조회할 수 있다. SHA-1 값을 날로 사용하기보다 쉬운 이름으로 된 포인터가 있으면 그걸 사용하는게 더 좋다. 외우기 쉬운 이름으로 된 파일에 SHA-1 값을 저장한다.</p>
<p>Git에서는 이런 것을 &quot;레퍼런스&quot; 또는 &quot;refs&quot;라고 부른다. SHA-1 값이 든 파일은 <code>.git/refs</code> 디렉토리에 있다. 이 프로젝트에는 아직 레퍼런스가 하나도 없다. 이 디렉토리의 구조는 매우 단순하다:</p>
<pre><code>$ find <span class="hljs-preprocessor">.git</span>/refs
<span class="hljs-preprocessor">.git</span>/refs
<span class="hljs-preprocessor">.git</span>/refs/heads
<span class="hljs-preprocessor">.git</span>/refs/tags
$ find <span class="hljs-preprocessor">.git</span>/refs -type f
$
</code></pre><p>레퍼런스가 있으면 마지막 커밋이 무엇인지 기억하기 쉽다. 사실 내부는 아래처럼 단순하다:</p>
<pre><code>$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"1a410efbd13591db07496601ebc7a059dd55cfe9"</span> &gt; .git/refs/heads/master
</code></pre><p>SHA-1 값 대신에 지금 만든 레퍼런스를 사용할 수 있다:</p>
<pre><code>$ git log <span class="hljs-comment">--pretty=oneline  master</span>
1a410efbd13591db07496601ebc7a059dd55cfe9 third <span class="hljs-operator"><span class="hljs-keyword">commit</span>
cac0cab538b970a37ea1e769cbbde608743bc96d <span class="hljs-keyword">second</span> <span class="hljs-keyword">commit</span>
fdf4fc3344e67ab068f836878b6c4951e3b15f3d <span class="hljs-keyword">first</span> <span class="hljs-keyword">commit</span></span>
</code></pre><p>레퍼런스 파일을 직접 고치는 것이 좀 못마땅하다. Git에는 좀 더 안전하게 바꿀 수 있는 <code>update-ref</code> 명령이 있다:</p>
<pre><code>$ git update-<span class="hljs-keyword">ref</span> refs/heads/master <span class="hljs-number">1</span>a410efbd13591db07496601ebc7a059dd55cfe9
</code></pre><p>Git 브랜치의 역할이 바로 이거다. 브랜치는 어떤 작업들 중 마지막 작업을 가리키는 포인터 또는 레퍼런스이다. 간단히 두 번째 커밋을 가리키는 브랜치를 만들어 보자:</p>
<pre><code>$ git update-<span class="hljs-keyword">ref</span> refs/heads/test cac0ca
</code></pre><p>브랜치는 직접 가리키는 커밋과 그 커밋으로 따라갈 수 있는 모든 커밋을 포함한다:</p>
<pre><code>$ git log <span class="hljs-comment">--pretty=oneline test</span>
cac0cab538b970a37ea1e769cbbde608743bc96d second <span class="hljs-operator"><span class="hljs-keyword">commit</span>
fdf4fc3344e67ab068f836878b6c4951e3b15f3d <span class="hljs-keyword">first</span> <span class="hljs-keyword">commit</span></span>
</code></pre><p>이제 Git 데이터베이스는 그림 9-4처럼 보인다.</p>
<p><img src="http://git-scm.com/figures/18333fig0904-tn.png" alt=""></p>
<p>그림 9-4. 브랜치 레퍼런스가 추가된 Git 데이터베이스</p>
<p><code>git branch (branchname)</code> 명령을 실행하면 Git은 내부적으로 <code>update-ref</code> 명령을 실행한다. 입력받은 브랜치 이름과 현 브랜치의 마지막 커밋의 SHA-1 값을 가져다 <code>update-ref</code> 명령을 실행한다.</p>
<h2 id="head">HEAD</h2>
<p><code>git branch (branchname)</code> 명령을 실행할 때 Git은 어떻게 마지막 커밋의 SHA-1 값을 아는 걸까? HEAD 파일은 현 브랜치를 가리키는 간접(symbolic) 레퍼런스다. 간접 레퍼런스이기 때문에 다른 레퍼런스와 다르다. 이 레퍼런스은 다른 레퍼런스를 가리키는 것이라서 SHA-1 값이 없다. 파일을 열어 보면 아래와 같이 생겼다:</p>
<pre><code>$ cat <span class="hljs-preprocessor">.git</span>/HEAD
<span class="hljs-label">ref:</span> refs/heads/master
</code></pre><p><code>git checkout test</code>를 실행하면 Git은 HEAD 파일을 아래와 같이 바꾼다:</p>
<pre><code>$ cat <span class="hljs-preprocessor">.git</span>/HEAD
<span class="hljs-label">ref:</span> refs/heads/test
</code></pre><p><code>git commit</code>을 실행하면 커밋 개체가 만들어지는데, 지금 HEAD가 가리키고 있던 커밋의 SHA-1 값이 그 커밋 개체의 부모로 사용된다.</p>
<p>이 파일도 손으로 직접 편집할 수 있지만  <code>symbolic-ref</code>라는 명령어가 있어서 좀 더 안전하게 사용할 수 있다. 이 명령으로 HEAD의 값을 읽을 수 있다:</p>
<pre><code>$ git symbolic-<span class="hljs-keyword">ref</span> HEAD
refs/heads/master
</code></pre><p>HEAD의 값을 변경할 수도 있다:</p>
<pre><code>$ git symbolic-<span class="hljs-keyword">ref</span> HEAD refs/heads/test
$ cat .git/HEAD
<span class="hljs-keyword">ref</span>: refs/heads/test
</code></pre><p>refs 형식에 맞지 않으면 수정할 수 없다:</p>
<pre><code>$ git symbolic-<span class="hljs-keyword">ref</span> HEAD test
fatal: Refusing <span class="hljs-keyword">to</span> point HEAD outside <span class="hljs-keyword">of</span> refs/
</code></pre><h2 id="-">태그</h2>
<p>중요한 개체는 모두 살펴봤고 남은 개체가 하나 있다. 태그 개체는 커밋 개체랑 매우 비슷하다. 커밋 개체처럼 누가, 언제 태그를 달았는지 태그 메시지는 무엇이고 어떤 커밋을 가리키는지에 대한 정보가 포함된다. 태그 개체는 Tree 개체가 아니라 커밋 개체를 가리키는 것이 그 둘의 차이다. 브랜치처럼 커밋 개체를 가리키지만 옮길 수는 없다. 태그 개체는 늘 그 이름이 뜻하는 커밋만 가리킨다.</p>
<p><em>2장</em>에서 배웠듯이 태그는 Annotated 태그와 Lightweight 태그 두 종류로 나뉜다. 먼저 아래와 같이 Lightweight 태그를 만들어 보자:</p>
<pre><code>$ git update-<span class="hljs-keyword">ref</span> refs/tags/v1<span class="hljs-number">.0</span> cac0cab538b970a37ea1e769cbbde608743bc96d
</code></pre><p>Lightwieght 태그는 만들기 쉽다. 브랜치랑 비슷하지만 브랜치처럼 옮길 수는 없다. 이에 비해 Annotated 태그는 좀 더 복잡하다. Annotated 태그를 만들면 Git은 태그 개체를 만들고 거기에 커밋을 가리키는 레퍼런스를 저장한다. Annotated 태그는 커밋을 직접 가리키지 않고 태그 개체를 가리킨다. <code>-a</code> 옵션을 주고 Annotated 태그를 만들고 확인해보자:</p>
<pre><code>$ git <span class="hljs-built_in">tag</span> <span class="hljs-attribute">-a</span> v1<span class="hljs-number">.1</span> <span class="hljs-number">1</span>a410efbd13591db07496601ebc7a059dd55cfe9 <span class="hljs-attribute">-m</span> <span class="hljs-string">'test tag'</span>
</code></pre><p>태그 개체의 SHA-1 값을 확인한다:</p>
<pre><code><span class="hljs-variable">$ </span>cat .git/refs/tags/v1.<span class="hljs-number">1</span>
<span class="hljs-number">9585191</span>f37f7b0fb9444f35a9bf50de191beadc2
</code></pre><p><code>cat-file</code> 명령으로 해당 SHA-1 값의 내용을 조회한다:</p>
<pre><code>$ git cat<span class="hljs-attribute">-file</span> <span class="hljs-attribute">-p</span> <span class="hljs-number">9585191</span>f37f7b0fb9444f35a9bf50de191beadc2
object <span class="hljs-number">1</span>a410efbd13591db07496601ebc7a059dd55cfe9
<span class="hljs-keyword">type</span> commit
<span class="hljs-built_in">tag</span> v1<span class="hljs-number">.1</span>
tagger Scott Chacon <span class="hljs-subst">&lt;</span>schacon@gmail<span class="hljs-built_in">.</span>com<span class="hljs-subst">&gt;</span> Sat May <span class="hljs-number">23</span> <span class="hljs-number">16</span>:<span class="hljs-number">48</span>:<span class="hljs-number">58</span> <span class="hljs-number">2009</span> <span class="hljs-subst">-</span><span class="hljs-number">0700</span>

test <span class="hljs-built_in">tag</span>
</code></pre><p><code>object</code> 부분에 있는 SHA-1 값이 실제로 태그가 가리키는 커밋이다. 커밋 개체뿐만 아니라 모든 Git 개체에 태그를 달 수 있다. 커밋 개체에 태그를 다는 것이 아니라 Git 개체에 태그를 다는 것이다. Git을 개발하는 프로젝트에서는 관리자가 자신의 GPG 공개키를 Blob 개체로 추가하고 그 파일에 태그를 달았다. 다음 명령으로 그 공개키를 확인할 수 있다:</p>
<pre><code>$ git cat<span class="hljs-attribute">-file</span> blob junio<span class="hljs-attribute">-gpg</span><span class="hljs-attribute">-pub</span>
</code></pre><p>Linux Kernel 저장소에도 커밋이 아닌 다른 개체를 가리키는 태그 개체가 있다. 그 태그는 저장소에 처음으로 소스 코드를 임포트했을 때 그 첫 Tree 개체를 가리킨다.</p>
<h2 id="-">리모트 레퍼런스</h2>
<p>리모트 레퍼런스라는 것도 있다. 리모트를 추가하고 Push하면 Git은 각 브랜치마다 Push한 마지막 커밋이 무엇인지 <code>refs/remotes</code> 디렉토리에 저장한다. 예를 들어, <code>origin</code>이라는 리모트를 추가하고 <code>master</code> 브랜치를 Push 한다:</p>
<pre><code>$ git remote <span class="hljs-keyword">add</span> origin git@github<span class="hljs-preprocessor">.com</span>:schacon/simplegit-progit<span class="hljs-preprocessor">.git</span>
$ git <span class="hljs-keyword">push</span> origin master
Counting objects: <span class="hljs-number">11</span>, done.
Compressing objects: <span class="hljs-number">100</span>% (<span class="hljs-number">5</span>/<span class="hljs-number">5</span>), done.
Writing objects: <span class="hljs-number">100</span>% (<span class="hljs-number">7</span>/<span class="hljs-number">7</span>), <span class="hljs-number">716</span> bytes, done.
Total <span class="hljs-number">7</span> (delta <span class="hljs-number">2</span>), reused <span class="hljs-number">4</span> (delta <span class="hljs-number">1</span>)
To git@github<span class="hljs-preprocessor">.com</span>:schacon/simplegit-progit<span class="hljs-preprocessor">.git</span>
   a11bef0.<span class="hljs-preprocessor">.ca</span>82a6d  master -&gt; master
</code></pre><p><code>origin</code>의 <code>master</code> 브랜치에서 서버와 마지막으로 교환한 커밋이 어떤 것인지 <code>refs/remotes/origin/master</code> 파일에서 확인할 수 있다:</p>
<pre><code><span class="hljs-variable">$ </span>cat .git/refs/remotes/origin/master
ca82a6dff817ec66f44342007202690a93763949
</code></pre><p>리모트 레퍼런스는 Checkout할 수 없다. <code>refs/heads</code>에 있는 레퍼런스인 브랜치와 다르다. 이 리모트 레퍼런스는 서버의 브랜치가 가리키는 커밋이 무엇인지 적어둔 일종의 북마크이다.
. 그리고 나서 Tree 개체를 만든다:</p>
<pre><code>$ echo <span class="hljs-string">'new file'</span> &gt; <span class="hljs-keyword">new</span>.txt
$ git update-<span class="hljs-keyword">index</span> test.txt
$ git update-<span class="hljs-keyword">index</span> --<span class="hljs-keyword">add</span> <span class="hljs-keyword">new</span>.txt
</code></pre><p>새 파일인 new.txt와 새로운 버전의 test.txt 파일까지 Staging Area에 추가했다. 현재 상태의 Staging Area를 새로운 Tree 개체로 기록하면 어떻게 보이는지 살펴보자:</p>
<pre><code>$ git write<span class="hljs-attribute">-tree</span>
<span class="hljs-number">0155</span>eb4229851634a0f03eb265b69f5a2d56f341
$ git cat<span class="hljs-attribute">-file</span> <span class="hljs-attribute">-p</span> <span class="hljs-number">0155</span>eb4229851634a0f03eb265b69f5a2d56f341
<span class="hljs-number">100644</span> blob fa49b077972391ad58037050f2a75f74e3671e92      <span class="hljs-literal">new</span><span class="hljs-built_in">.</span>txt
<span class="hljs-number">100644</span> blob <span class="hljs-number">1</span>f7a7a472abf3dd9643fd615f6da379c4acb3e3a      test<span class="hljs-built_in">.</span>txt
</code></pre><p>이 Tree 개체에는 파일이 두 개 있고 test.txt 파일의 SHA 값도 두 번째 버전인 <code>1f7a7a1</code>이다. 재미난 걸 해보자. 처음에 만든 Tree 개체를 하위 디렉토리로 만들 수 있다. <code>read-tree</code> 명령으로 Tree 개체를 읽어 Staging Area에 추가한다. <code>--prefix</code> 옵션을 주면 Tree 개체를 하위 디렉토리로 추가할 수 있다.</p>
<pre><code>$ git <span class="hljs-built_in">read</span>-tree <span class="hljs-comment">--prefix=bak d8329fc1cc938780ffdd9f94e0d364e0ea74f579</span>
$ git <span class="hljs-built_in">write</span>-tree
<span class="hljs-number">3</span>c4e9cd789d88d8d89c1073707c3585e41b0e614
$ git cat-<span class="hljs-built_in">file</span> -p <span class="hljs-number">3</span>c4e9cd789d88d8d89c1073707c3585e41b0e614
<span class="hljs-number">040000</span> tree d8329fc1cc938780ffdd9f94e0d364e0ea74f579      bak
<span class="hljs-number">100644</span> blob fa49b077972391ad58037050f2a75f74e3671e92      <span class="hljs-built_in">new</span>.txt
<span class="hljs-number">100644</span> blob <span class="hljs-number">1</span>f7a7a472abf3dd9643fd615f6da379c4acb3e3a      test.txt
</code></pre><p>이 Tree 개체로 워킹 디렉토리를 만들면 파일 두 개와 <code>bak</code>이라는 하위 디렉토리가 생긴다. 그리고 <code>bak</code> 디렉토리 안에는 test.txt 파일의 처음 버전이 들어 있다. 그림 9-2와 같은 구조로 데이터가 저장된다.</p>
<p><img src="http://git-scm.com/figures/18333fig0902-tn.png" alt=""></p>
<p>그림 9-2. 현재 Git 데이터 구조</p>
<h2 id="-">커밋 개체</h2>
<p>각기 다른 스냅샷을 나타내는 Tree 개체를 세 개 만들었다. 하지만, 여전히 이 스냅샷을 불러 오려면 SHA-1 값을 기억하고 있어야 한다. 스냅샷을 누가, 언제, 왜 저장했는지에 대한 정보는 아예 없다. 이런 정보는 커밋 개체에 저장된다:</p>
<p>커밋 개체는 <code>commit-tree</code> 명령으로 만든다. 이 명령에 커밋 개체에 대한 설명과 Tree 개체의 SHA-1 값 한 개를 넘긴다. 앞서 저장한 첫 번째 Tree를 가지고 아래와 같이 만들어 본다:</p>
<pre><code>$ <span class="hljs-built_in">echo</span> <span class="hljs-string">'first commit'</span> | git commit-tree d8329f
fdf4fc3344e67ab068f836878b6c4951e3b15f3d
</code></pre><p>새로 생긴 커밋 개체를 <code>cat-file</code> 명령으로 확인해보자:</p>
<pre><code><span class="hljs-variable">$ </span>git cat-file -p fdf4fc3
tree d8329fc1cc938780ffdd9f94e0d364e0ea74f579
author <span class="hljs-constant">Scott</span> <span class="hljs-constant">Chacon</span> &lt;schacon<span class="hljs-variable">@gmail</span>.com&gt; <span class="hljs-number">1243040974</span> -<span class="hljs-number">0700</span>
committer <span class="hljs-constant">Scott</span> <span class="hljs-constant">Chacon</span> &lt;schacon<span class="hljs-variable">@gmail</span>.com&gt; <span class="hljs-number">1243040974</span> -<span class="hljs-number">0700</span>

first commit
</code></pre><p>커밋 개체의 형식은 간단하다. 해당 스냅샷에서 최상단 Tree를(역주 - 루트 디렉터리 같은) 하나 가리킨다. 그리고 <code>user.name</code>과 <code>user.email</code> 설정에서 가져온 Author/Committer 정보, 시간 정보, 그리고 한 줄 띄운 다음 커밋 메시지가 들어 간다.</p>
<p>이제 커밋 개체를 두 개 더 만들어 보자. 각 커밋 개체는 이전 개체를 가리키도록 한다:</p>
<pre><code>$ echo <span class="hljs-string">'second commit'</span> <span class="hljs-subst">|</span> git commit<span class="hljs-attribute">-tree</span> <span class="hljs-number">0155</span>eb <span class="hljs-attribute">-p</span> fdf4fc3
cac0cab538b970a37ea1e769cbbde608743bc96d
$ echo <span class="hljs-string">'third commit'</span>  <span class="hljs-subst">|</span> git commit<span class="hljs-attribute">-tree</span> <span class="hljs-number">3</span>c4e9c <span class="hljs-attribute">-p</span> cac0cab
<span class="hljs-number">1</span>a410efbd13591db07496601ebc7a059dd55cfe9
</code></pre><p>세 커밋 개체는 각각 해당 스냅샷을 나타내는 Tree 개체를 하나씩 가리키고 있다. 이상해 보이겠지만 우리는 진짜 Git 히스토리를 만들었다. 마지막 커밋 개체의 SHA-1 값을 주고 <code>git log</code> 명령을 실행하면 아래와 같이 출력한다:</p>
<pre><code>$ git log --stat <span class="hljs-number">1</span>a410e
commit <span class="hljs-number">1</span>a410efbd13591db07496601ebc7a059dd55cfe9
<span class="hljs-label">Author:</span> Scott Chacon &lt;schacon@gmail<span class="hljs-preprocessor">.com</span>&gt;
<span class="hljs-label">Date:</span>   Fri May <span class="hljs-number">22</span> <span class="hljs-number">18</span>:<span class="hljs-number">15</span>:<span class="hljs-number">24</span> <span class="hljs-number">2009</span> -<span class="hljs-number">0700</span>

    third commit

 bak/test<span class="hljs-preprocessor">.txt</span> |    <span class="hljs-number">1</span> +
 <span class="hljs-number">1</span> files changed, <span class="hljs-number">1</span> insertions(+), <span class="hljs-number">0</span> deletions(-)

commit cac0cab538b970a37ea1e769cbbde608743bc96d
<span class="hljs-label">Author:</span> Scott Chacon &lt;schacon@gmail<span class="hljs-preprocessor">.com</span>&gt;
<span class="hljs-label">Date:</span>   Fri May <span class="hljs-number">22</span> <span class="hljs-number">18</span>:<span class="hljs-number">14</span>:<span class="hljs-number">29</span> <span class="hljs-number">2009</span> -<span class="hljs-number">0700</span>

    second commit

 new<span class="hljs-preprocessor">.txt</span>  |    <span class="hljs-number">1</span> +
 test<span class="hljs-preprocessor">.txt</span> |    <span class="hljs-number">2</span> +-
 <span class="hljs-number">2</span> files changed, <span class="hljs-number">2</span> insertions(+), <span class="hljs-number">1</span> deletions(-)

commit fdf4fc3344e67ab068f836878b6c4951e3b15f3d
<span class="hljs-label">Author:</span> Scott Chacon &lt;schacon@gmail<span class="hljs-preprocessor">.com</span>&gt;
<span class="hljs-label">Date:</span>   Fri May <span class="hljs-number">22</span> <span class="hljs-number">18</span>:<span class="hljs-number">09</span>:<span class="hljs-number">34</span> <span class="hljs-number">2009</span> -<span class="hljs-number">0700</span>

    first commit

 test<span class="hljs-preprocessor">.txt</span> |    <span class="hljs-number">1</span> +
 <span class="hljs-number">1</span> files changed, <span class="hljs-number">1</span> insertions(+), <span class="hljs-number">0</span> deletions(-)
</code></pre><p>놀랍지 않은가! 방금 우리는 고수준 명령어 없이 저수준의 명령으로만 Git 히스토리를 만들었다. 지금 한 일이 <code>git add</code>와 <code>git commit</code> 명령을 실행했을 때 Git 내부에서 일어나는 일이다. Git은 변경된 파일을 Blob 개체로 저장하고 현 Index에 따라서 Tree 개체를 만든다. 그리고 이전 커밋 개체와 최상위 Tree 개체를 참고해서 커밋 개체를 만든다. 즉 Blob, Tree, 커밋 개체가 Git의 주요 개체이고 이 개체는 전부 <code>.git/objects</code> 디렉토리에 저장된다. 이 예제에서 생성한 개체는 아래와 같다:</p>
<pre><code>$ find <span class="hljs-preprocessor">.git</span>/objects -type f
<span class="hljs-preprocessor">.git</span>/objects/<span class="hljs-number">01</span>/<span class="hljs-number">55</span>eb4229851634a0f03eb265b69f5a2d56f341 <span class="hljs-preprocessor"># tree 2</span>
<span class="hljs-preprocessor">.git</span>/objects/<span class="hljs-number">1</span>a/<span class="hljs-number">410</span>efbd13591db07496601ebc7a059dd55cfe9 <span class="hljs-preprocessor"># commit 3</span>
<span class="hljs-preprocessor">.git</span>/objects/<span class="hljs-number">1</span>f/<span class="hljs-number">7</span>a7a472abf3dd9643fd615f6da379c4acb3e3a <span class="hljs-preprocessor"># test.txt v2</span>
<span class="hljs-preprocessor">.git</span>/objects/<span class="hljs-number">3</span>c/<span class="hljs-number">4e9</span>cd789d88d8d89c1073707c3585e41b0e614 <span class="hljs-preprocessor"># tree 3</span>
<span class="hljs-preprocessor">.git</span>/objects/<span class="hljs-number">83</span>/baae61804e65cc73a7201a7252750c76066a30 <span class="hljs-preprocessor"># test.txt v1</span>
<span class="hljs-preprocessor">.git</span>/objects/ca/c0cab538b970a37ea1e769cbbde608743bc96d <span class="hljs-preprocessor"># commit 2</span>
<span class="hljs-preprocessor">.git</span>/objects/d6/<span class="hljs-number">70460</span>b4b4aece5915caf5c68d12f560a9fe3e4 <span class="hljs-preprocessor"># 'test content'</span>
<span class="hljs-preprocessor">.git</span>/objects/d8/<span class="hljs-number">329</span>fc1cc938780ffdd9f94e0d364e0ea74f579 <span class="hljs-preprocessor"># tree 1</span>
<span class="hljs-preprocessor">.git</span>/objects/fa/<span class="hljs-number">49</span>b077972391ad58037050f2a75f74e3671e92 <span class="hljs-preprocessor"># new.txt</span>
<span class="hljs-preprocessor">.git</span>/objects/fd/f4fc3344e67ab068f836878b6c4951e3b15f3d <span class="hljs-preprocessor"># commit 1</span>
</code></pre><p>내부의 포인터를 따라가면 그림 9-3과 같은 그래프가 그려진다.</p>
<p><img src="http://git-scm.com/figures/18333fig0903-tn.png" alt=""></p>
<p>그림 9-3. Git 저장소 내의 모든 개체</p>
<h2 id="-">개체 저장소</h2>
<p>내용과 함께 헤더도 저장한다고 얘기했다. 잠시 Git이 개체를 어떻게 저장하는지부터 살펴보자. &quot;what is up, doc?&quot;이라는 문자열을 가지고 대화형 Ruby 쉘 <code>irb</code> 명령어로 흉내 내 보자:</p>
<pre><code><span class="hljs-variable">$ </span>irb
&gt;&gt; content = <span class="hljs-string">"what is up, doc?"</span>
=&gt; <span class="hljs-string">"what is up, doc?"</span>
</code></pre><p>Git은 개체의 타입을 시작으로 헤더를 만든다. 그다음에 공백 문자 하나, 내용의 크기, 마지막에 널 문자를 추가한다:</p>
<pre><code>&gt;&gt; header = "blob #{<span class="ruby">content.length}</span>\0"
=<span class="ruby">&gt; <span class="hljs-string">"blob 16\000"</span></span>
</code></pre><p>Git은 헤더와 원래 내용을 합쳐서 SHA-1 체크섬을 계산한다. Ruby에서도 <code>require</code>로 SHA1 라이브러리를 가져다가 흉내 낼 수 있다. <code>require</code>로 라이브러리를 포함하고 나서 <code>Digest::SHA1.hexdigest()</code>를 호출한다:</p>
<pre><code>&gt;&gt; store = header + content<span class="hljs-function">
=&gt;</span> <span class="hljs-string">"blob 16\000what is up, doc?"</span>
&gt;&gt; <span class="hljs-built_in">require</span> <span class="hljs-string">'digest/sha1'</span><span class="hljs-function">
=&gt;</span> <span class="hljs-literal">true</span>
&gt;&gt; sha1 = <span class="hljs-attribute">Digest</span>::SHA1.hexdigest<span class="hljs-function"><span class="hljs-params">(store)</span>
=&gt;</span> <span class="hljs-string">"bd9dbf5aae1a3862dd1526723246b20206e5fc37"</span>
</code></pre><p>Git은 또 zlib으로 내용을 압축한다. Ruby에도 zlib 라이브러리가 있으니 Ruby에서도 할 수 있다. 라이브러리를 포함하고 <code>Zlib::Deflate.deflate()</code>를 호출한다:</p>
<pre><code>&gt;&gt; <span class="hljs-built_in">require</span> <span class="hljs-string">'zlib'</span><span class="hljs-function">
=&gt;</span> <span class="hljs-literal">true</span>
&gt;&gt; zlib_content = <span class="hljs-attribute">Zlib</span>::Deflate.deflate<span class="hljs-function"><span class="hljs-params">(store)</span>
=&gt;</span> <span class="hljs-string">"x\234K\312\311OR04c(\317H,Q\310,V(-\320QH\311O\266\a\000_\034\a\235"</span>
</code></pre><p>마지막으로 zlib으로 압축한 내용을 개체로 저장한다. SHA-1 값 중에서 맨 앞에 있는 두 자를 가져다 하위 디렉토리 이름으로 사용하고 나머지 38자를 그 디렉토리 안에 있는 파일이름으로 사용한다. Ruby에서는 <code>FileUtils.mkdir_p()</code>로 하위 디렉토리의 존재를 보장하고 나서 <code>File.open()</code>으로 파일을 연다. 그리고 그 파일에 zlib으로 압축한 내용을 <code>write()</code> 함수로 저장한다.</p>
<pre><code>&gt;&gt; path = <span class="hljs-string">'.git/objects/'</span> + sha1[<span class="hljs-number">0</span>,<span class="hljs-number">2</span>] + <span class="hljs-string">'/'</span> + sha1[<span class="hljs-number">2</span>,<span class="hljs-number">38</span>]<span class="hljs-function">
=&gt;</span> <span class="hljs-string">".git/objects/bd/9dbf5aae1a3862dd1526723246b20206e5fc37"</span>
&gt;&gt; <span class="hljs-built_in">require</span> <span class="hljs-string">'fileutils'</span><span class="hljs-function">
=&gt;</span> <span class="hljs-literal">true</span>
&gt;&gt; FileUtils.mkdir_p<span class="hljs-function"><span class="hljs-params">(File.dirname(path))</span>
=&gt;</span> <span class="hljs-string">".git/objects/bd"</span>
&gt;&gt; File.open(path, <span class="hljs-string">'w'</span>) { |f| f.write zlib_content }<span class="hljs-function">
=&gt;</span> <span class="hljs-number">32</span>
</code></pre><p>다 됐다. 이제 Git Blob 개체를 손으로 만들었다. Git 개체는 모두 이 방식으로 저장하며 단지 종류만 다르다. 헤더가 <code>blob</code>이 아니라 그냥 <code>commit</code>이나 <code>tree</code>로 시작하게 되는 것뿐이다. Blob 개체는 여기서 보여준 것과 거의 같지만 커밋이 개체나 Tree 개체는 각기 다른 형식을 사용한다.
�고 그 프로젝트 디렉토리로 이동해서 이 명령의 표준출력을 <code>git fast-import</code> 명령의 표준입력으로 연결한다(pipe).</p>
<pre><code>$ git init
Initialized empty Git repository in /opt/import<span class="hljs-emphasis">_to/.git/
$ ruby import.rb /opt/import_</span>from | git fast-import
<span class="hljs-header">git-fast-import statistics:
---------------------------------------------------------------------</span>
Alloc'd objects:       5000
Total objects:           18 (         1 duplicates                  )
<span class="hljs-code">      blobs  :            7 (         1 duplicates          0 deltas)</span>
<span class="hljs-code">      trees  :            6 (         0 duplicates          1 deltas)</span>
<span class="hljs-code">      commits:            5 (         0 duplicates          0 deltas)</span>
<span class="hljs-code">      tags   :            0 (         0 duplicates          0 deltas)</span>
Total branches:           1 (         1 loads     )
<span class="hljs-code">      marks:           1024 (         5 unique    )</span>
<span class="hljs-code">      atoms:              3</span>
Memory total:          2255 KiB
<span class="hljs-code">       pools:          2098 KiB</span>
<span class="hljs-header">     objects:           156 KiB
---------------------------------------------------------------------</span>
pack<span class="hljs-emphasis">_report: getpagesize()            =       4096
pack_</span>report: core.packedGitWindowSize =   33554432
pack<span class="hljs-emphasis">_report: core.packedGitLimit      =  268435456
pack_</span>report: pack<span class="hljs-emphasis">_used_</span>ctr            =          9
pack<span class="hljs-emphasis">_report: pack_</span>mmap<span class="hljs-emphasis">_calls          =          5
pack_</span>report: pack<span class="hljs-emphasis">_open_</span>windows        =          1 /          1
<span class="hljs-header">pack_report: pack_mapped              =       1356 /       1356
---------------------------------------------------------------------</span>
</code></pre><p>성공적으로 끝나면 여기서 보여주는 것처럼 어떻게 됐는지 통계를 보여준다. 이 경우엔 브랜치 1개와 커밋 5개 그리고 개체 18개가 임포트됐다. <code>git log</code> 명령으로 히스토리 조회가 가능하다:</p>
<pre><code>$ git log -2
<span class="hljs-operator"><span class="hljs-keyword">commit</span> <span class="hljs-number">10</span>bfe7d22ce15ee25b60a824c8982157ca593d41
Author: Scott Chacon &lt;schacon@example.com&gt;
<span class="hljs-keyword">Date</span>:   Sun May <span class="hljs-number">3</span> <span class="hljs-number">12</span>:<span class="hljs-number">57</span>:<span class="hljs-number">39</span> <span class="hljs-number">2009</span> -<span class="hljs-number">0700</span>

    imported <span class="hljs-keyword">from</span> <span class="hljs-keyword">current</span>

<span class="hljs-keyword">commit</span> <span class="hljs-number">7e519590</span>de754d079dd73b44d695a42c9d2df452
Author: Scott Chacon &lt;schacon@example.com&gt;
<span class="hljs-keyword">Date</span>:   Tue Feb <span class="hljs-number">3</span> <span class="hljs-number">01</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-number">2009</span> -<span class="hljs-number">0700</span>

    imported <span class="hljs-keyword">from</span> back_2009_02_03</span>
</code></pre><p>이 시점에서는 아무것도 Checkout하지 않았기 때문에 워킹 디렉토리에 아직 아무 파일도 없다. <code>master</code> 브랜치로 Reset해서 파일을 Checkout한다:</p>
<pre><code>$ ls
$ git reset <span class="hljs-comment">--hard master</span>
HEAD <span class="hljs-keyword">is</span> now <span class="hljs-keyword">at</span> <span class="hljs-number">10</span>bfe7d imported <span class="hljs-keyword">from</span> current
$ ls
<span class="hljs-type">file</span>.rb  lib
</code></pre><p><code>fast-import</code> 명령으로 많은 일을 할 수 있다. 모드를 설정하고, 바이너리 데이터를 다루고, 브랜치를 여러 개 다루고, Merge하고, 태그를 달고, 진행상황을 보여 주고, 등등 무수히 많은 일을 할 수 있다. Git 소스의 <code>contrib/fast-import</code> 디렉토리에 복잡한 상황을 다루는 예제가 많다. 그 중 여기서 설명한 <code>git-p4</code> 스크립트가 좋은 예제이다.</p>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="../git_/git_.html" class="navigation navigation-prev"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../git_/packfile.html" class="navigation navigation-next"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
        <link rel="stylesheet" href="../gitbook/style.css">
        
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/mode-javascript.js"></script>
        <script src="../gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
        <script src="../gitbook/app.js"></script>
        
    </body>
</html>
